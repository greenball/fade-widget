/**
 * Greenball/fadeWidget published under MIT license.
 * @package https://github.com/greenball/fadeWidget
 * @version 1.0.1
 */
(function(e,t){e.widget("ui.fadeWidget",{options:{fx:"slide",fxDuration:0,bgColor:"rgba(0,0,0,0.75)",addClass:"",image:null,timer:null,timerSteps:100},_create:function(){this._layer=e("<div />").addClass(this.widgetFullName+"Main "+this.options.addClass).css({"background-color":this.options.bgColor}).hide();this._inside=e("<div />").addClass(this.widgetFullName+"Inside"+" "+this.options.addClass).appendTo(this._layer);this.options.image?this.live("image"):null;this.options.timer?this.live("timer"):null;this._layer.prependTo(document.body);this._position();e(window).bind("resize",e.proxy(this._position,this));this._trigger("create",null,this);if(!this.options.fxDuration){this._layer.show();this._trigger("visible",null,this)}else{this._layer.show(this.options.fx,this.options.fxDuration,e.proxy(function(){this._trigger("visible",null,this)},this))}},layer:function(){return this._layer},destroy:function(){this.die("timer");e.Widget.prototype.destroy.call(this);if(!this.options.fxDuration){this._layer.remove();this._trigger("hidden",null,this);this._trigger("destroy",null,this)}else{this._layer.stop(true,true).fadeOut(this.options.fx,e.proxy(function(){this._layer.remove();this._trigger("hidden",null,this);this._trigger("destroy",null,this)},this))}e(window).unbind("resize",e.proxy(this._position,this))},die:function(t){if(t=="timer"&&this.options.timer){if(e.ui.hasOwnProperty("timerWidget")&&e.ui.hasOwnProperty("counterWidget")){console.error("The timer feature requires Greenball/timerWidget and Greenball/counterWidget to be load. https://github.com/greenball")}this._inside.timerWidget("destroy")}else if(t=="image"&&this.options.image){this._image.remove();this._image=null}},live:function(t){if(t=="timer"&&this.options.timer&&e.ui.hasOwnProperty("timerWidget")&&e.ui.hasOwnProperty("counterWidget")){this._inside.timerWidget({text:this.options.timer,step:this.options.timerSteps})}else if(t=="image"&&this.options.image){this._image=e("<img />",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}).addClass(this.widgetFullName+"Img"+" "+this.options.addClass).appendTo(this._inside).hide();this._image.attr("src",this.options.image);this._image.bind("load",e.proxy(this._position,this));this._position()}},_position:function(){this._layer.css({width:this.element.outerWidth(),height:this.element.outerHeight()}).position({of:this.element});if(this._image){setTimeout(e.proxy(function(){this._image.position({my:"center center",at:"center center",of:this._layer}).fadeIn()},this),100)}}});e.fadeWidgetFx=function(e){return e?e:{}}})($)